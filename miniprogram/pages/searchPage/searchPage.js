"use strict";
Page({
    data: {
        historySearchList: [],
        inputValue: ""
    },
    onLoad: function (options) {
        console.log(options, '参数');
        if (options && options.searchValue) {
            this.setData({
                inputValue: options.searchValue,
            });
        }
        var historySearchList = wx.getStorageSync('historySearchList');
        if (historySearchList) {
            this.setData({
                historySearchList: historySearchList,
            });
        }
        else {
            wx.setStorageSync('historySearchList', []);
        }
    },
    goBack: function () {
        wx.navigateBack();
    },
    clearHistory: function () {
        wx.setStorageSync('historySearchList', []);
        this.setData({
            historySearchList: [],
        });
    },
    search: function (e) {
        console.log(e, "传递的值");
        var newList = this.data.historySearchList;
        var findIdx = newList.findIndex(function (el) { return el === e.detail.value; });
        if (findIdx !== -1) {
            newList.splice(findIdx, 1);
        }
        if (newList.length > 10) {
            newList.pop();
        }
        newList.unshift(e.detail.value.trim());
        wx.setStorageSync('historySearchList', newList);
        this.setData({
            historySearchList: newList,
            inputValue: ""
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VhcmNoUGFnZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNlYXJjaFBhZ2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQVdBLElBQUksQ0FBQztJQUNILElBQUksRUFBYztRQUNoQixpQkFBaUIsRUFBRSxFQUFFO1FBQ3JCLFVBQVUsRUFBRSxFQUFFO0tBQ2Y7SUFDRCxNQUFNLEVBQU4sVUFBTyxPQUFZO1FBQ2pCLE9BQU8sQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxDQUFBO1FBQzFCLElBQUksT0FBTyxJQUFJLE9BQU8sQ0FBQyxXQUFXLEVBQUU7WUFDbEMsSUFBSSxDQUFDLE9BQU8sQ0FBQztnQkFDWCxVQUFVLEVBQUUsT0FBTyxDQUFDLFdBQVc7YUFDaEMsQ0FBQyxDQUFBO1NBQ0g7UUFDRCxJQUFJLGlCQUFpQixHQUFHLEVBQUUsQ0FBQyxjQUFjLENBQUMsbUJBQW1CLENBQUMsQ0FBQTtRQUM5RCxJQUFJLGlCQUFpQixFQUFFO1lBQ3JCLElBQUksQ0FBQyxPQUFPLENBQUM7Z0JBQ1gsaUJBQWlCLG1CQUFBO2FBQ2xCLENBQUMsQ0FBQTtTQUNIO2FBQU07WUFDTCxFQUFFLENBQUMsY0FBYyxDQUFDLG1CQUFtQixFQUFFLEVBQUUsQ0FBQyxDQUFBO1NBQzNDO0lBRUgsQ0FBQztJQUVELE1BQU0sRUFBTjtRQUNFLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQTtJQUNuQixDQUFDO0lBQ0QsWUFBWSxFQUFaO1FBQ0UsRUFBRSxDQUFDLGNBQWMsQ0FBQyxtQkFBbUIsRUFBRSxFQUFFLENBQUMsQ0FBQTtRQUMxQyxJQUFJLENBQUMsT0FBTyxDQUFDO1lBQ1gsaUJBQWlCLEVBQUUsRUFBRTtTQUN0QixDQUFDLENBQUE7SUFDSixDQUFDO0lBQ0QsTUFBTSxFQUFOLFVBQU8sQ0FBTTtRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFBO1FBQ3RCLElBQUksT0FBTyxHQUFVLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUE7UUFFaEQsSUFBSSxPQUFPLEdBQVcsT0FBTyxDQUFDLFNBQVMsQ0FBQyxVQUFDLEVBQU8sSUFBSyxPQUFBLEVBQUUsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBckIsQ0FBcUIsQ0FBQyxDQUFBO1FBQzNFLElBQUksT0FBTyxLQUFLLENBQUMsQ0FBQyxFQUFFO1lBQ2xCLE9BQU8sQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFBO1NBQzNCO1FBQ0QsSUFBSSxPQUFPLENBQUMsTUFBTSxHQUFHLEVBQUUsRUFBRTtZQUN2QixPQUFPLENBQUMsR0FBRyxFQUFFLENBQUE7U0FDZDtRQUNELE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQTtRQUN0QyxFQUFFLENBQUMsY0FBYyxDQUFDLG1CQUFtQixFQUFFLE9BQU8sQ0FBQyxDQUFBO1FBQy9DLElBQUksQ0FBQyxPQUFPLENBQUM7WUFDWCxpQkFBaUIsRUFBRSxPQUFPO1lBQzFCLFVBQVUsRUFBRSxFQUFFO1NBQ2YsQ0FBQyxDQUFBO0lBQ0osQ0FBQztDQUNGLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8qXHJcbiAqIEBBdXRob3I6IGNodW55YW4ubGlhbmcgPGNodW55YW4ubGlhbmdAaGFuZC1jaGluYS5jb20+XHJcbiAqIEBEYXRlOiAyMDIxLTA3LTA5IDE3OjQ3OjA2XHJcbiAqIEBMYXN0RWRpdFRpbWU6IDIwMjEtMDctMTIgMTM6NDc6MDdcclxuICogQERlc2NyaXB0aW9uOlxyXG4gKi9cclxuaW50ZXJmYWNlIHNlYXJjaERhdGEge1xyXG4gIGhpc3RvcnlTZWFyY2hMaXN0OiBhbnlbXSxcclxuICBpbnB1dFZhbHVlOiBhbnlcclxufVxyXG5cclxuUGFnZSh7XHJcbiAgZGF0YTogPHNlYXJjaERhdGE+e1xyXG4gICAgaGlzdG9yeVNlYXJjaExpc3Q6IFtdLFxyXG4gICAgaW5wdXRWYWx1ZTogXCJcIlxyXG4gIH0sXHJcbiAgb25Mb2FkKG9wdGlvbnM6IGFueSkge1xyXG4gICAgY29uc29sZS5sb2cob3B0aW9ucywgJ+WPguaVsCcpXHJcbiAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLnNlYXJjaFZhbHVlKSB7XHJcbiAgICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgICAgaW5wdXRWYWx1ZTogb3B0aW9ucy5zZWFyY2hWYWx1ZSxcclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIGxldCBoaXN0b3J5U2VhcmNoTGlzdCA9IHd4LmdldFN0b3JhZ2VTeW5jKCdoaXN0b3J5U2VhcmNoTGlzdCcpXHJcbiAgICBpZiAoaGlzdG9yeVNlYXJjaExpc3QpIHtcclxuICAgICAgdGhpcy5zZXREYXRhKHtcclxuICAgICAgICBoaXN0b3J5U2VhcmNoTGlzdCxcclxuICAgICAgfSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHd4LnNldFN0b3JhZ2VTeW5jKCdoaXN0b3J5U2VhcmNoTGlzdCcsIFtdKVxyXG4gICAgfVxyXG5cclxuICB9LFxyXG4gIC8vIOi/lOWbnlxyXG4gIGdvQmFjaygpOiB2b2lkIHtcclxuICAgIHd4Lm5hdmlnYXRlQmFjaygpXHJcbiAgfSxcclxuICBjbGVhckhpc3RvcnkoKTogdm9pZCB7XHJcbiAgICB3eC5zZXRTdG9yYWdlU3luYygnaGlzdG9yeVNlYXJjaExpc3QnLCBbXSlcclxuICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgIGhpc3RvcnlTZWFyY2hMaXN0OiBbXSxcclxuICAgIH0pXHJcbiAgfSxcclxuICBzZWFyY2goZTogYW55KTogdm9pZCB7XHJcbiAgICBjb25zb2xlLmxvZyhlLCBcIuS8oOmAkueahOWAvFwiKVxyXG4gICAgbGV0IG5ld0xpc3Q6IGFueVtdID0gdGhpcy5kYXRhLmhpc3RvcnlTZWFyY2hMaXN0XHJcbiAgICAvLyDpmZDliLbmkJzntKLljoblj7LvvIzlkozmkJzntKLph43lpI3ljoblj7JcclxuICAgIGxldCBmaW5kSWR4OiBudW1iZXIgPSBuZXdMaXN0LmZpbmRJbmRleCgoZWw6IGFueSkgPT4gZWwgPT09IGUuZGV0YWlsLnZhbHVlKVxyXG4gICAgaWYgKGZpbmRJZHggIT09IC0xKSB7XHJcbiAgICAgIG5ld0xpc3Quc3BsaWNlKGZpbmRJZHgsIDEpXHJcbiAgICB9XHJcbiAgICBpZiAobmV3TGlzdC5sZW5ndGggPiAxMCkge1xyXG4gICAgICBuZXdMaXN0LnBvcCgpXHJcbiAgICB9XHJcbiAgICBuZXdMaXN0LnVuc2hpZnQoZS5kZXRhaWwudmFsdWUudHJpbSgpKVxyXG4gICAgd3guc2V0U3RvcmFnZVN5bmMoJ2hpc3RvcnlTZWFyY2hMaXN0JywgbmV3TGlzdClcclxuICAgIHRoaXMuc2V0RGF0YSh7XHJcbiAgICAgIGhpc3RvcnlTZWFyY2hMaXN0OiBuZXdMaXN0LFxyXG4gICAgICBpbnB1dFZhbHVlOiBcIlwiXHJcbiAgICB9KVxyXG4gIH1cclxufSkiXX0=